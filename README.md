# Happy Farm - เกมลากผลไม้

เกมลากผลไม้ที่สร้างด้วย Phaser 3 โดยผู้เล่นจะต้องลากผลไม้ชนิดเดียวกันที่อยู่ช่องติดกันเพื่อทำคะแนน

![Game Preview]([https://github.com/your_username/your_repository/blob/main/logo.png](https://img5.pic.in.th/file/secure-sv1/Screenshot-2025-07-01-141058.png))

## วิธีการเล่น

### กติกาพื้นฐาน
1. **ลากผลไม้ชนิดเดียวกันที่อยู่ช่องติดกัน**
2. **ขั้นต่ำ 3 ช่องติดกัน** ถึงจะได้คะแนน
3. **แต่ละช่องที่ลากติดกันได้จะได้ช่องละ 1 คะแนน**
4. **หากได้ 10 ช่องต่อกันจะได้รับโบนัส 5 คะแนน**
5. **มีเวลา 30 วินาทีในการเล่น**
6. **เป้าหมายคือทำคะแนนให้ได้มากที่สุด!**

### การควบคุม
- **คลิกและลาก** (หรือแตะและลากบนมือถือ) เพื่อเลือกผลไม้
- **ลากต่อเนื่อง** ไปยังผลไม้ชนิดเดียวกันที่ติดกัน
- **ปล่อยเมาส์/นิ้ว** เมื่อเลือกเสร็จ

### ระบบคะแนน
- **1 คะแนน** ต่อช่องที่ลากได้
- **โบนัส 5 คะแนน** เมื่อลากได้ 10 ช่องต่อกัน
- **ตัวอย่าง**: ลากได้ 7 ช่อง = 7 คะแนน, ลากได้ 10 ช่อง = 15 คะแนน

### เกมจบเมื่อ
- หมดเวลา 30 วินาที
- ผลไม้หมดจากตาราง
- ไม่มีทางลากผลไม้ได้อีกต่อไป

## การติดตั้งและรัน

1. เปิดไฟล์ `index.html` ในเว็บเบราว์เซอร์
2. หรือใช้ local server:
   ```bash
   # ใช้ Python
   python -m http.server 8000
   
   # ใช้ Node.js
   npx http-server
   ```

## โครงสร้างโปรเจค

```
HappyFarm/
├── assets/           # รูปภาพและไฟล์เสียง
├── src/
│   ├── main.js      # จุดเริ่มต้นเกม
│   ├── scenes/
│   │   ├── Preload.js  # โหลดทรัพยากร
│   │   ├── Start.js    # หน้าเมนูหลัก
│   │   ├── Game.js     # หน้าเกมหลัก
│   │   └── utils.js    # ฟังก์ชันช่วยเหลือ
│   └── index.html   # ไฟล์ HTML หลัก
```

## ฟีเจอร์

- ✅ ระบบลากผลไม้แบบต่อเนื่อง
- ✅ ระบบตรวจสอบผลไม้ที่ติดกัน
- ✅ ระบบคะแนนและโบนัส
- ✅ ระบบเวลา
- ✅ เอฟเฟกต์การเคลื่อนไหว
- ✅ หน้าเมนูและกติกา
- ✅ ระบบตรวจสอบการจบเกม
- ✅ เอฟเฟกต์ confetti เมื่อเกมจบ

## เทคโนโลยีที่ใช้

- **Phaser 3** - Game framework
- **JavaScript ES6+** - ภาษาโปรแกรมมิ่ง
- **HTML5 Canvas** - การแสดงผล

## การปรับแต่ง

คุณสามารถปรับแต่งเกมได้โดยแก้ไขค่าต่างๆ ใน `src/scenes/Game.js`:

- `this.rows` และ `this.cols` - จำนวนแถวและคอลัมน์
- `this.cellSize` - ขนาดของแต่ละช่อง
- `this.gap` - ช่องว่างระหว่างช่อง
- `this.fruits` - ชนิดของผลไม้

## การพัฒนาเพิ่มเติม

แนวคิดสำหรับการพัฒนาต่อ:
- เพิ่มระบบระดับ (Levels)
- เพิ่มผลไม้พิเศษ
- เพิ่มระบบ Combo
- เพิ่มระบบ Leaderboard
- เพิ่มเสียงประกอบ
- เพิ่มระบบ Power-ups 

## สรุป Logic เกมทั้งหมด (อัปเดตล่าสุด)

### 1. State ของเกม
- มี state หลัก 2 ค่า: `playGame` (เล่นได้) และ `gameOver` (จบเกม)
- ขณะอยู่ใน state `playGame` จะลากผลไม้ได้ปกติ
- เมื่อจบเกม state จะเปลี่ยนเป็น `gameOver` และจะไม่สามารถลากหรือคลิกอะไรในเกมได้ ยกเว้นปุ่มปิด/กลับเมนู

### 2. การสร้างกระดานผลไม้
- สุ่มผลไม้ 4 ชนิด (fruit1, fruit2, fruit3, fruit4) ลงในตารางขนาด 8x6
- แต่ละช่องมีขนาดและระยะห่างที่กำหนด

### 3. การลากผลไม้
- ผู้เล่นคลิก/แตะที่ผลไม้เพื่อเริ่มลาก
- สามารถลากผ่านผลไม้ชนิดเดียวกันที่อยู่ติดกัน (แนวตั้ง/แนวนอน)
- ผลไม้ที่ถูกลากจะเปลี่ยนเป็นภาพ active
- จำกัดการลากสูงสุด 10 ช่องต่อครั้ง
- ต้องลากอย่างน้อย 3 ช่องถึงจะได้คะแนน
- ขณะลากจะแสดง sprite รูปมือ (hand-cursor) ตาม pointer
- ถ้า state ไม่ใช่ `playGame` จะไม่สามารถลากได้

### 4. การคิดคะแนน
- ได้ 1 คะแนนต่อผลไม้ที่ลากได้แต่ละช่อง
- ถ้าลากได้ 10 ช่องพอดี จะได้โบนัสเพิ่ม 5 คะแนน (รวมเป็น 15 คะแนน)
- คะแนนจะปรากฏ popup ที่ตำแหน่งสุดท้ายที่ลากมาถึง

### 5. การลบ/เติมผลไม้
- ผลไม้ที่ถูกเลือกจะหายไปพร้อมเอฟเฟกต์ scale/alpha
- ผลไม้ที่อยู่เหนือช่องว่างจะตกลงมา (drop)
- ช่องว่างด้านบนจะถูกสุ่มผลไม้ใหม่ร่วงลงมา (refill)
- มีอนิเมชัน tween ให้ผลไม้ตกและเด้งนิดๆ

### 6. ระบบ Shuffle
- ถ้าไม่มีทางลากผลไม้ได้อีก (ไม่มีผลไม้ชนิดเดียวกันติดกัน 3 ช่องขึ้นไป)
- จะสลับตำแหน่งผลไม้ใน grid แบบสุ่ม (shuffle) อัตโนมัติ
- จะ shuffle ซ้ำจนกว่าจะมีทางเล่นต่อได้จริง

### 7. ระบบเวลา
- เริ่มต้นนับถอยหลัง 30 วินาที (Countdown)
- ตัวเลขเวลาจะเปลี่ยนสีเมื่อใกล้หมดเวลา (ส้ม/แดง)
- เมื่อหมดเวลา เกมจะจบทันที

### 8. การจบเกม
- เกมจบเมื่ออย่างใดอย่างหนึ่งเกิดขึ้น:
  - เวลาหมด (0 วินาที)
  - ผลไม้หมดกระดาน
  - ไม่มีทางลากผลไม้ได้อีกต่อไป (และ shuffle ไม่สามารถสร้างทางเล่นใหม่ได้)
- เมื่อจบเกมจะแสดง popup คะแนนสุดท้าย, ปุ่มปิด/กลับเมนู, เอฟเฟกต์ confetti
- ขณะอยู่ใน state `gameOver` จะคลิก/ลากอะไรในเกมไม่ได้ ยกเว้นปุ่มปิด

### 9. การ reset เกม
- ทุกครั้งที่เข้า scene ใหม่ (เล่นใหม่/กลับเมนู) ตัวแปรสำคัญ (score, gameTime, state, grid ฯลฯ) จะถูกรีเซ็ตใน `create()`
- Timer จะเริ่มใหม่และนับถอยหลังถูกต้อง

### 10. UI/UX
- มีหน้าเมนูหลักพร้อมปุ่มเริ่ม, ปุ่มกติกา, ปุ่มออก
- กติกาอธิบายชัดเจนใน popup
- มีข้อความแนะนำขณะเล่น (ลากต่ออีกกี่ช่อง, ได้คะแนน, เตือนโบนัส)
- มีเอฟเฟกต์ popup, confetti, และ hand-cursor

--- 
